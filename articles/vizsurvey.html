<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Guide pas à pas pour fouiller et détecter les anomalies • vizsurvey</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Guide pas à pas pour fouiller et détecter les anomalies">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vizsurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/vizsurvey.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data-preparation.html">Préparer les données</a></li>
    <li><a class="dropdown-item" href="../articles/methods.html">Méthodologie et usages des fonctions</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tdelc/vizsurvey/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Guide pas à pas pour fouiller et détecter les anomalies</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tdelc/vizsurvey/blob/master/vignettes/vizsurvey.Rmd" class="external-link"><code>vignettes/vizsurvey.Rmd</code></a></small>
      <div class="d-none name"><code>vizsurvey.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<div class="section level3">
<h3 id="pourquoi-vizsurvey">Pourquoi vizsurvey ?<a class="anchor" aria-label="anchor" href="#pourquoi-vizsurvey"></a>
</h3>
<p>Dans un processus statistique conforme au GSBPM, la qualité ne se
joue pas uniquement en amont (échantillonnage, questionnaire, collecte)
ni en aval (analyse, diffusion). Entre collecte et analyse, une phase
clé consiste à contrôler et monitorer le matériau collecté pour repérer
rapidement les anomalies, documenter les écarts et, si nécessaire,
déclencher des actions correctrices.</p>
<p>{vizsurvey} répond à cette problématique : il offre une interface
interactive pour parcourir vos données, comparer des profils de réponses
et prioriser les investigations. L’objectif n’est pas de conclure
statistiquement, mais de guider le regard de l’analyste avec des
indicateurs simples (distances, rangs) et des visualisations
adaptées.</p>
</div>
<div class="section level3">
<h3 id="cohérence-par-enquêteurrice">Cohérence par enquêteur·rice<a class="anchor" aria-label="anchor" href="#coh%C3%A9rence-par-enqu%C3%AAteurrice"></a>
</h3>
<p>Le rôle des enquêteur·rices est central : compréhension fine du
questionnaire, respect du routing, gestion de l’entretien. Il peut
néanmoins apparaître des effets enquêteur (différences systématiques de
distribution des réponses selon la personne qui interroge), dus à des
méthodes de travail différentes, des biais involontaires, des erreurs
récurrentes ou, plus rarement, à de la fraude.</p>
<p>Sur ce sujet, {vizsurvey} permet de :</p>
<ul>
<li><p>Comparer les distributions de réponses d’un·e enquêteur·rice à
tous les autres ;</p></li>
<li><p>Classer les personnes selon plusieurs indicateurs de distance
;</p></li>
<li><p>Focaliser l’examen sur les combinaisons enquêteur·rice × variable
les plus atypiques.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="cohérence-par-domaine">Cohérence par domaine<a class="anchor" aria-label="anchor" href="#coh%C3%A9rence-par-domaine"></a>
</h3>
<p>D’une année à l’autre, les questionnaires évoluent (libellés,
routing, filtres), mais les variables cibles doivent rester comparables.
{vizsurvey} permet de définir une variable de domaine (ici par exemple
l’année de l’enquête), permettant de mettre en évidence :</p>
<ul>
<li><p>les écarts de distributions ou de niveaux (proportions, moyennes)
;</p></li>
<li><p>les variables présentant des ruptures qui méritent une relecture
(mise en œuvre du routing, recodage, version du questionnaire,
changement de collecte, etc.).</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="base-de-données-dexemples">Base de données d’exemples<a class="anchor" aria-label="anchor" href="#base-de-donn%C3%A9es-dexemples"></a>
</h3>
<p>Afin d’illustrer les fonctionnalités du package {vizsurvey}, nous
proposons des fichiers d’enquête issue de deux grandes enquêtes
européenne : ESS (European Social Survey) et SILC (Survey on Income and
Living Conditions).</p>
<p>L’<a href="https://ess.sikt.no/en/series/321b06ad-1b98-4b7d-93ad-ca8a24e8788a" class="external-link">ESS</a>
est une enquête européenne menée tous les deux ans depuis 2002. Elle
vise à comprendre les attitudes, les valeurs et les comportements des
habitants des pays européens. Les questions portent sur des thèmes
variés : la politique, la confiance dans les institutions, le bien-être,
la religion, le travail, la santé, etc. L’ESS est une enquête en face à
face avec un protocole commun à travers les pays participants pour
garantir la comparabilité internationale. Les données sont rendues
publiques et servent à la recherche en sciences sociales. Nous
fournissons deux vagues d’enquêtes : <a href="https://ess.sikt.no/en/study/bdc7c350-1029-4cb3-9d5e-53f668b8fa74/" class="external-link">ESS9</a>
et <a href="https://ess.sikt.no/en/study/172ac431-2a06-41df-9dab-c1fd8f3877e7/" class="external-link">ESS10</a>.</p>
<p>L’<a href="https://ec.europa.eu/eurostat/web/microdata/european-union-statistics-on-income-and-living-conditions" class="external-link">EU-SILC</a>
est une enquête annuelle coordonnée par Eurostat. Elle sert à mesurer
les revenus, la pauvreté, les inégalités et les conditions de vie dans
les pays européens. SILC permet notamment de calculer des indicateurs
clés comme le taux de pauvreté le celui de privation matérielle et
sociale. C’est une enquête auprès des ménages, menée par les instituts
nationaux de statistique (comme Statbel en Belgique). Eurostat fournit
publiquement des Public Use Files, des fichiers utilisables publiquement
pour des tests. Les fichiers sont anonymisés et ne reproduisent pas
nécessairement les résultats officiels. Nous fournissons deux fichiers :
P-FILE (fichier des individus) et H-FILE (fichier des ménages). Il n’y a
pas de numéro d’enquêteur indiqué dans ces fichiers initialement, donc
un numéro fictif a été créé pour les exemples ici.</p>
</div>
</div>
<div class="section level2">
<h2 id="lancement-de-vizsurvey">Lancement de vizsurvey<a class="anchor" aria-label="anchor" href="#lancement-de-vizsurvey"></a>
</h2>
<p>Il y a trois manières de lancer {vizsurvey} : à partir d’une base de
données en R (<code>runVizsurvey_from_r</code>), à partir d’un fichier
csv (<code>runVizsurvey_from_file</code>), ou en préparant une structure
de fichier pour analyser en simultané plusieurs enquêtes
(<code>runVizsurvey_from_folder</code>).</p>
<div class="section level3">
<h3 id="à-partir-dun-objet-r">À partir d’un objet R<a class="anchor" aria-label="anchor" href="#%C3%A0-partir-dun-objet-r"></a>
</h3>
<p>Pour lancer l’interface à partir d’un objet R, il suffit d’appeler la
fonction <code>runVizsurvey_from_r</code> avec le nom de l’objet.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>warning <span class="op">=</span> <span class="cn">FALSE</span>, message <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tdelc/vizsurvey" class="external-link">vizsurvey</a></span><span class="op">)</span></span>
<span><span class="co"># Not Work</span></span>
<span><span class="fu"><a href="../reference/runVizsurvey_from_r.html">runVizsurvey_from_r</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<p>Si vous avez lancé les packages nécessaires, une interface {shiny} se
lance dans votre navigateur. Cette interface est pratiquement vide, car
vous n’avez renseigné aucun argument, comme une variable identifiant les
enquêteur·rices, ou une pour identifier les domaines ou les sous groupes
de ventilation. Voici la commande pour intégrer ces paramètres.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Not Work</span></span>
<span><span class="fu"><a href="../reference/runVizsurvey_from_r.html">runVizsurvey_from_r</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>                    var_itw    <span class="op">=</span> <span class="st">"NR_ITW"</span>,</span>
<span>                    var_domain <span class="op">=</span> <span class="st">"ID_DOMAIN"</span>,</span>
<span>                    var_group  <span class="op">=</span> <span class="st">"ID_GROUP"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="à-partir-dune-base-de-données-brute">À partir d’une base de données brute<a class="anchor" aria-label="anchor" href="#%C3%A0-partir-dune-base-de-donn%C3%A9es-brute"></a>
</h3>
<p>{vizsurvey} peut aussi être utilisé à partir d’un fichier brut, en
csv, ou tout autre format lisible par la fonction <code>fread</code> du
package {data.table}. La commande est similaire à celle pour un objet R
:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Not Work</span></span>
<span><span class="fu"><a href="../reference/runVizsurvey_from_file.html">runVizsurvey_from_file</a></span><span class="op">(</span><span class="va">path</span>,</span>
<span>                       var_itw    <span class="op">=</span> <span class="st">"NR_ITW"</span>,</span>
<span>                       var_domain <span class="op">=</span> <span class="st">"ID_DOMAIN"</span>,</span>
<span>                       var_group  <span class="op">=</span> <span class="st">"ID_GROUP"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="à-partir-dun-répertoire-de-bases-de-données">À partir d’un répertoire de bases de données<a class="anchor" aria-label="anchor" href="#%C3%A0-partir-dun-r%C3%A9pertoire-de-bases-de-donn%C3%A9es"></a>
</h3>
<p>Le package {vizsurvey} peut gérer plusieurs répertoires contenant
différentes enquêtes. Dans ce type de configuration, on part du principe
que plusieurs utilisateur·rices exploitent {vizsurvey} à différents
moments. Or, la génération des statistiques à chaque lancement de
l’application peut s’avérer trop longue. Il est donc préférable de
préparer les fichiers en amont, afin de rendre l’ouverture de
l’interface plus fluide.</p>
<p>Cette vignette se concentre uniquement sur la visualisation des
données à l’aide de {vizsurvey}. La procédure de préparation et de
création des fichiers est détaillée dans une autre vignette dédiée.</p>
<p>Chaque enquête (et donc chaque dossier de base de données) doit
contenir un fichier global de configuration au format .rds. Pour lancer
l’interface, il suffit ensuite d’indiquer le répertoire source des
données, et le nombre de sous répertoires présents (1 si le répertoire
contient une enquête, 2 si plusieurs répertoires sont présents, 3 si
plusieurs répertoires contiennent eux mêmes plusieurs répertoires
d’enquête). Voici par exemple la commande pour une structure comportant
deux répertoires ESS et SILC, avec leurs sous-répertoires d’enquêtes :
ESS9, ESS10 pour ESS ; HFILE et PFILE pour SILC.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runVizsurvey_from_folder.html">runVizsurvey_from_folder</a></span><span class="op">(</span><span class="st">"inst/extdata"</span>,depth_folder <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="analyse-de-la-cohérence-par-enquêteurrice">Analyse de la cohérence par enquêteur·rice<a class="anchor" aria-label="anchor" href="#analyse-de-la-coh%C3%A9rence-par-enqu%C3%AAteurrice"></a>
</h2>
<p>L’analyse de la cohérence par enquêteur vise à évaluer la qualité et
la régularité des données collectées selon la personne ayant mené les
entretiens. Dans une enquête, chaque enquêteur·rice constitue une source
potentielle de variabilité non due à l’échantillonnage mais à des effets
d’enquête : différences d’interprétation du questionnaire, stratégies de
réponse, ou biais de saisie.</p>
<p>Cette étape permet donc d’identifier d’éventuelles anomalies de
collecte (valeurs atypiques, proportions incohérentes, taux anormal de
données manquantes), mais aussi de détecter des profils de collecte
homogènes suggérant une bonne application du protocole.</p>
<p>L’objectif n’est pas de sanctionner, mais de documenter la fiabilité
du processus de terrain, d’orienter les actions de formation et de
calibrage, et d’améliorer la qualité globale des enquêtes futures.</p>
<p>L’analyse repose sur une comparaison systématique entre les
enquêteur·rices pour un ensemble d’indicateurs clés (valeurs manquantes,
distributions des réponses).</p>
<div class="section level3">
<h3 id="données-dexemples">Données d’exemples<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-dexemples"></a>
</h3>
<p>Le package {laeken} fournit un fichier d’exemple de l’enquête SILC.
Nous pouvons prendre ce fichier comme exemple, et venir créer un faux
numéro d’enquêteur·rice à partir de la variable de province
<code>DB040</code>. Nous exécutons la fonction
<code>runVizsurvey_from_r</code> avec comme argument supplémentaire
<code>var_group = "DB040"</code> afin de prévoir des subdivisions de
l’analyse par province.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>warning <span class="op">=</span> <span class="cn">FALSE</span>, message <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> </span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">NR_ITW</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">$</span><span class="va">db040</span>,<span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span>,replace <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,sep<span class="op">=</span><span class="st">"-"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="../reference/runVizsurvey_from_r.html">runVizsurvey_from_r</a></span><span class="op">(</span><span class="va">eusilc</span>,var_itw <span class="op">=</span> <span class="st">"NR_ITW"</span>,var_group <span class="op">=</span> <span class="st">"db040"</span><span class="op">)</span></span></code></pre></div>
<p>Le premier onglet de {vizsurvey} permet de naviguer de manière
interactive à travers les situations détectées comme anormales
concernant les enquêteur·rices.</p>
<p><img src="images/clipboard-3454725579.png"></p>
</div>
<div class="section level3">
<h3 id="analyse-de-la-carte-de-chaleur">Analyse de la carte de chaleur<a class="anchor" aria-label="anchor" href="#analyse-de-la-carte-de-chaleur"></a>
</h3>
<p>Chaque ligne est un ou une enquêtrice. Ici, nous reconnaissons les
provinces autrichiennes avec un index, issu de notre création d’un
numéro d’enquêteur·rice. Chaque colonne est une variable, catégorielle
ou continue. Chaque cellule est colorée si les réponses de
l’enquêteur·rice pour cette variable est suffisamment différente des
réponses du reste de la base de données.</p>
<p>Pour les variables catégorielles, il peut s’agir d’un écart trop
important sur le pourcentage de données manquantes, ou d’un
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>χ</mi><mi>²</mi></mrow><annotation encoding="application/x-tex">\chi²</annotation></semantics></math>
trop élevé (donc d’une distribution très éloignée du reste de la base de
données). Pour les variables numériques, il peut s’agir d’un écart trop
important sur le pourcentage de données manquantes ou sur la médiane.
Dans les deux cas, ces écarts sont normalisés par variable avant
affichage, et la cellule s’affiche si l’écart dépasse cinq écarts-types
pour cette variable. Le détail méthodologique sur les calculs effectués
se trouve dans une vignette dédiée.</p>
<p>En survolant les cellules, toutes les informations sont affichées, de
sorte à comprendre la source de la coloration. Voici une première
manière d’analyser la carte de chaleur :</p>
<ul>
<li><p>Une cellule isolée rouge n’est pas problématique en soi : avec
beaucoup de croisements, il est normal d’observer quelques
extrêmes.</p></li>
<li><p>Une ligne régulièrement rouge (sur plusieurs variables) évoque un
comportement récurrent (erreur de procédure, incompréhension, routage
mal appliqué, voire fraude).</p></li>
<li><p>Une colonne rouge (sur plusieurs enquêteur·rices) pointe une
variable fragile (libellé ambigu, routing, effet d’une zone).</p></li>
</ul>
<p>Par défaut, la carte de chaleur affiche une cellule en rouge lorsque
l’un des écarts dépasse 5 écart-type de la variable. Dans notre
situation, cela conduit à afficher 7 cellules, toutes pour Vienne. En
réduisant le seuil de sensibilité dans les paramètres, on affiche bien
plus de cellules. Il n’y a pas de seuil prédéterminée, ou
statistiquement valide, pour une telle analyse. Cela doit être déterminé
par tâtonnement par l’équipe en charge de la coordination de l’enquête.
Il est également possible de modifier le nombre de lignes minimum (donc
d’enquêtes) pour afficher la ligne, ou le nombre de valeurs non
manquantes nécessaires pour l’affichage d’une cellule.</p>
<p><img src="images/clipboard-1081520372.png"> Enfin, il est possible
de zoomer dans la carte de chaleur, sur les lignes, les colonnes, ou sur
les cellules à risque. Cela permet, lorsque la carte de chaleur est trop
vaste, de cibler plus efficacement les situations à analyser. Voici par
exemple la même carte de chaleur pour une sensibilité de deux écart-type
avec un zoom sur les cellules à risque. On voit que d’autres cellules
apparaissent suite à la hausse de sensibilité, mais que certaines
provinces ont disparu, car n’affichant aucune cellule rouge.</p>
<p><img src="images/clipboard-902632245.png"></p>
</div>
<div class="section level3">
<h3 id="analyse-dune-variable-catégorielle">Analyse d’une variable catégorielle<a class="anchor" aria-label="anchor" href="#analyse-dune-variable-cat%C3%A9gorielle"></a>
</h3>
<p>Dans notre exemple, avec une sensibilité de 5 écart-type, sept
cellules s’allument en rouge pour la région de Vienne. En cliquant sur
le croisement Vienne-1 / HHSIZE, on peut afficher la distribution de
cette variable HHSIZE pour l’enquêteur Vienne-1, et la comparer avec la
distribution de cette variable pour les autres. Un résumé statistique de
la variable est disponible en dessous à l’aide du package
<code>summarytools</code>.</p>
<p>On découvre ainsi que les modalités 3 et 4 de la variable HHSIZE sont
bien moins présentes chez l’enquêteur Vienne-1 que chez les autres.</p>
<p><img src="images/clipboard-4063476803.png"> Pour essayer de
comprendre ces différences, nous avons inclus un algorithme qui calcule
les dix corrélations les plus hautes dans la base de données, pour
ensuite projeter les corrélations effectives pour l’enquêteur·rice et
celles du reste de la base de données. Il s’agit uniquement de
corrélations de pearson en transformant au préalable les variables
catégorielles en facteur.</p>
<blockquote>
<p><strong>Principe directeur</strong> : aucun test statistique n’est
effectué. {vizsurvey} calcule des distances, des scores, des rangs et
des corrélations destinés à <strong>prioriser</strong> la revue. Les
conclusions analytiques restent du ressort de l’équipe
méthodologique.</p>
</blockquote>
<p>Pour notre enquêteur Vienne-1 et son résultat surprenant pour la
variable HHSIZE, on observe que les corrélations de cette variable sont
identiques chez lui et pour le reste de la base de données. Cela semble
écarter l’hypothèse d’une anomalie spécifique à cette variable.</p>
<p><img src="images/clipboard-3734839128.png"></p>
<p>Pour revenir sur la carte de chaleur, on remarque que les cinq
cellules de Vienne sont allumées en rouge pour la variable HHSIZE,
preuve d’un effet de zone plutôt qu’un effet d’enquêteur·rice. Pour s’en
convaincre, on peut sélectionner DB040 = Vienne en haut de l’interface.
Dès lors, la carte de chaleur se limite aux données de Vienne, et
n’affiche que les écarts des enquêteur·rices par rapport à cette
province. Et ainsi, il n’y a plus aucune cellule s’affichant en
rouge.</p>
<p><img src="images/clipboard-1042724936.png"></p>
</div>
<div class="section level3">
<h3 id="analyse-dune-variable-continue">Analyse d’une variable continue<a class="anchor" aria-label="anchor" href="#analyse-dune-variable-continue"></a>
</h3>
<p>Lorsqu’on clique sur une variable continue, la fonction de densité
s’affiche alors, toujours avec le point de comparaison entre
l’enquêteur·rice, et le reste de la base de données. Dans notre cas
Voici un exemple pour la variable d’âge pour l’enquêtrice Carinthia-5
:</p>
<p><img src="images/clipboard-3649549679.png"></p>
</div>
<div class="section level3">
<h3 id="synthèse-des-anomalies">Synthèse des anomalies<a class="anchor" aria-label="anchor" href="#synth%C3%A8se-des-anomalies"></a>
</h3>
<p>Quand le volume de croisements est important, il est difficile de
savoir où commencer sur la carte de chaleur. {vizsurvey} propose un
classement des enquêteur·rices avec un modèle Isolation Forest appliqué
aux vecteurs de χ² pour les variables catégorielles et de médianes pour
les variables continues.</p>
<p>La méthode <a href="https://cran.r-project.org/web/packages/isotree/vignettes/An_Introduction_to_Isolation_Forests.html" class="external-link">Isolation
Forest</a> est une technique d’apprentissage automatique non supervisée
utilisée pour établir un classement de rareté des observations. Elle
repose sur une idée simple : les observations inhabituelles sont plus
faciles à isoler que les observations “normales”. Concrètement,
l’algorithme construit de nombreux arbres de décision aléatoires : à
chaque nœud, une variable et une valeur de coupure sont choisies au
hasard pour diviser l’échantillon. Une observation est isolée
lorsqu’elle se retrouve seule dans une branche. Les observations
anormales nécessitent donc moins de divisions pour être isolées. Le
score d’isolation obtenu peut ensuite être utilisé pour établir un
rang.</p>
<blockquote>
<p><em>Important</em> : ce classement n’est pas une preuve. Il
<strong>priorise</strong> l’audit (lecture ciblée des variables
responsables, vérification du contexte terrain).</p>
</blockquote>
<p>Voici le classement des enquêteur·rices issue de la carte de chaleur.
On retrouve enquêteur·rices de province de Vienne, mais aussi d’autres
de la province de la basse et la haute Autriche. Pour ces deux derniers
cas, il n’y a pas d’écarts au dessus du seuil de sensibilité, mais
l’isolation se fait rapidement.</p>
<p><img src="images/clipboard-3867511669.png"></p>
<p>En cliquant sur un·e enquêteur·rice, on obtient un deuxième tableau à
droite avec la liste des variables. Voici l’illustration en cliquant sur
l’enquêtrice Vienna-4. Cela permet d’orienter l’analyse en commençant
par les variables les plus marquantes. En cliquant sur une variable, on
obtient en dessous les graphiques d’analyse comme durant la carte de
chaleur.</p>
<p><img src="images/clipboard-2304792987.png"></p>
</div>
<div class="section level3">
<h3 id="résumé-analyse-pas-à-pas">Résumé : analyse pas à pas<a class="anchor" aria-label="anchor" href="#r%C3%A9sum%C3%A9-analyse-pas-%C3%A0-pas"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Sélectionner</strong> l’enquête et la période.</li>
<li>
<strong>Choisir</strong> l’onglet <em>Enquêteurs</em>.</li>
<li>
<strong>Filtrer</strong> la base de données selon une zone en
particulier, et ajuster les paramètres d’affichage.</li>
<li>
<strong>Parcourir la heatmap</strong> pour repérer les zones les
plus rouges.</li>
<li>
<strong>Cliquer</strong> sur une cellule pour ouvrir les détails
(distribution, corrélation).</li>
<li>
<strong>Comparer</strong> à la référence et regarder la cohérence
intra-variable (modalités) et inter-variables (corrélations).</li>
<li>
<strong>Consigner</strong> les cas récurrents (mêmes écarts sur
plusieurs variables ou dans le temps).</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="analyse-de-la-cohérence-par-domaine">Analyse de la cohérence par domaine<a class="anchor" aria-label="anchor" href="#analyse-de-la-coh%C3%A9rence-par-domaine"></a>
</h2>
<p>L’analyse de la cohérence par domaine vise à vérifier la stabilité
des indicateurs clés dans le temps et à détecter d’éventuelles ruptures
liées à des changements de collecte, de pondération ou de comportement
des unités répondantes. Toutes les variables sont examinées d’un domaine
à un autre (souvent d’une année sur l’autre) afin d’identifier les
variations anormalement fortes qui ne s’expliqueraient pas par
l’évolution réelle du phénomène observé. Cette approche permet de
distinguer les fluctuations statistiques attendues (échantillonnage,
conjoncture, etc.) des sauts incohérents suggérant une erreur de codage
ou de définition. L’objectif est de garantir la continuité temporelle
des séries.</p>
<div class="section level3">
<h3 id="données-dexemples-1">Données d’exemples<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-dexemples-1"></a>
</h3>
<p>Nous pouvons repartir du fichier <code>eusilc</code> du package
{laeken}, et venir créer un faux domaine d’analyse. Nous allons créer
une variable d’année aléatoire entre 2010 et 2020, et provoquer quelques
erreurs à détecter pour l’année 2020 : la variable <code>pb220a</code>
sera manquante, la modalité 4 de la variable <code>hsize</code>
n’existera pas, et la variable de revenu équivalent moyen
<code>eqIncome</code> sera à la mauvaise échelle.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Générer la variable d'année</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> </span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">YEAR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">2010</span><span class="op">:</span><span class="fl">2020</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span>,replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Générer les erreurs</span></span>
<span><span class="va">eusilc</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">YEAR</span> <span class="op">==</span> <span class="fl">2020</span>,<span class="st">"pb220a"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">eusilc</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">YEAR</span> <span class="op">==</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">hsize</span> <span class="op">==</span> <span class="fl">4</span>,<span class="st">"hsize"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">eusilc</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">YEAR</span> <span class="op">==</span> <span class="fl">2020</span>,<span class="st">"eqIncome"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">eusilc</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">YEAR</span> <span class="op">==</span> <span class="fl">2020</span>,<span class="st">"eqIncome"</span><span class="op">]</span> <span class="op">/</span> <span class="fl">100</span></span>
<span></span>
<span><span class="fu"><a href="../reference/runVizsurvey_from_r.html">runVizsurvey_from_r</a></span><span class="op">(</span><span class="va">eusilc</span>,var_domain <span class="op">=</span> <span class="st">"YEAR"</span>,var_group <span class="op">=</span> <span class="st">"db040"</span><span class="op">)</span></span></code></pre></div>
<p>Le deuxième onglet de {vizsurvey} permet de naviguer de manière
interactive à travers les situations détectées comme anormales
concernant les domaines.</p>
</div>
<div class="section level3">
<h3 id="analyse-des-changements-sur-les-variables">Analyse des changements sur les variables<a class="anchor" aria-label="anchor" href="#analyse-des-changements-sur-les-variables"></a>
</h3>
<p>Le tableau de droite indique les variables ayant apparu ou disparu
entre les domaines. On retrouve ici la variable <code>pb220a</code> que
nous avons supprimé pour l’année 2020.</p>
<p><img src="images/clipboard-1381589877.png"></p>
<p>Le tableau de gauche indique les variables ayant connu une variation
notable. Chaque ligne est une variable ayant connu un changement entre
deux modalités du domaine. Par défaut, le domaine de référence est la
dernière modalité de la variable (ici 2020 pour l’année), et la
comparaison se fait avec l’avant dernière modalité (ici 2019). Vous
pouvez changer de modalité de référence, ou ajouter des modalités de
comparaison. Attention, la lecture du tableau est peu lisible au delà de
deux modalités de comparaison. Les cellules sont colorées lorsque
l’écart est suffisamment élevé.</p>
<p><img src="images/clipboard-1694810607.png"></p>
<p>Pour les variables catégorielles, il peut s’agir d’un écart trop
important sur le pourcentage de données manquantes ou sur le nombre de
modalités. Ici, on retrouve la variable <code>HSIZE</code> qui voit une
hausse de données manquantes. Pour les variables continues, il peut
s’agir d’un écart trop important sur le pourcentage de données
manquantes, la moyenne ou sur la médiane. Ici, on retrouve la variable
<code>EQINCOME</code> avec l’erreur de milliers.</p>
<p>Ce seuil de sensibilité peut être modifié, affichant plus ou moins de
variables. Il est également possible de faire varier du nombre de
valeurs non manquantes nécessaire pour inclure la variable dans
l’analyse.</p>
</div>
<div class="section level3">
<h3 id="analyse-graphique">Analyse graphique<a class="anchor" aria-label="anchor" href="#analyse-graphique"></a>
</h3>
<p>Pour chaque variable détectée dans cet onglet, des graphiques sont
accessibles dans l’onglet <em>Graphics</em> pour mieux comprendre les
écarts entre domaine. Le graphique de gauche illustre la distribution de
la variable pour le domaine de référence. Le graphique de droite
illustre la comparaison entre les domaines sélectionnés.</p>
<p>Voici l’exemple pour la variable catégorielle <code>HSIZE</code> On
détecte automatiquement la part de données manquantes importante en
2020.</p>
<p><img src="images/clipboard-687156213.png"></p>
<p>Voici l’exemple pour la variable continue <code>EQINCOME</code> On
détecte automatiquement la différence d’échelle des deux
distributions.</p>
<p><img src="images/clipboard-1475833445.png"></p>
</div>
<div class="section level3">
<h3 id="résumé-analyse-pas-à-pas-1">Résumé : analyse pas à pas<a class="anchor" aria-label="anchor" href="#r%C3%A9sum%C3%A9-analyse-pas-%C3%A0-pas-1"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Sélectionner</strong> l’enquête et la période.</li>
<li>
<strong>Choisir</strong> l’onglet <em>Domain</em>.</li>
<li>
<strong>Filtrer</strong> la base de données selon une zone en
particulier, et ajuster les paramètres d’affichage.</li>
<li>
<strong>Lister</strong> les variables ayant apparu et disparu et
vérifier si cela est justifiable.</li>
<li>
<strong>Parcourir</strong> les variables ayant changé, pour vérifier
chaque écart en rouge.</li>
<li>
<strong>Analyser</strong> ces variables à l’aide des
graphiques.</li>
<li>
<strong>Consigner</strong> les cas problématiques (nouvelle
modalité, distribution très différente, etc.).</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>L’analyse de la cohérence par enquêteur·rice constitue une étape
essentielle du contrôle qualité d’une enquête, mais elle ne vise pas à
produire des jugements automatiques. L’outil {vizsurvey} n’infère rien :
il organise l’exploration et met en évidence les régularités, écarts ou
incohérences susceptibles d’attirer l’attention du service de
coordination du terrain. L’interprétation des résultats doit toujours
s’appuyer sur le contexte opérationnel : les consignes données aux
enquêteur·rices, les conditions de collecte, etc. Ces éléments seuls
permettent de distinguer une vraie anomalie d’un simple effet de
structure ou de calendrier.</p>
<p>De plus, les informations mobilisées concernent parfois des données
sensibles, tant sur les enquêteur·rices que sur les ménages interrogés ;
elles doivent donc être traitées dans le strict respect des règles de
confidentialité et de protection des données personnelles en
vigueur.</p>
<p>En résumé, {vizsurvey} est un outil d’aide à l’analyse, pas un outil
de diagnostic automatique. Il permet de rendre visibles les
comportements de collecte et d’outiller les équipes d’enquête, mais les
conclusions finales relèvent toujours du jugement éclairé de ces
équipes.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Delclite, Adrien Mierop.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
